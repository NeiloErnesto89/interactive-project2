{"filter":false,"title":"pollution.js","tooltip":"/js/pollution.js","undoManager":{"mark":9,"position":9,"stack":[[{"start":{"row":0,"column":0},"end":{"row":293,"column":4},"action":"insert","lines":["queue()","    .defer(d3.json, \"data/EU_Data_Sim.json\")","    .await(makeGraphs);","","function makeGraphs(error, pollutionData) {","    var ndx = crossfilter(pollutionData);","","    show_region_emission_chart(ndx);","","    show_region_emission_pie(ndx);","","    show_region_selector(ndx);","","    show_eu_barchart(ndx);","","    show_average_death_rate(ndx);","    ","    show_death_v_gdp_correlation(ndx);",""," /*   show_country_death_toll(ndx); */","","    dc.renderAll();","","}","","function show_region_selector(ndx) {","    dim = ndx.dimension(dc.pluck(\"Region\"));","    group = dim.group()","","    dc.selectMenu(\"#region-selector\")","        .dimension(dim)","        .group(group);","}","","","function show_region_emission_chart(ndx) {","    var region_dim = ndx.dimension(dc.pluck(\"Region\"));","    var total_emissions = region_dim.group().reduceSum(dc.pluck('EmissionsR'));","","","    dc.barChart(\"#pollution-chart\")","        .width(600)","        .height(400)","        .margins({ top: 10, right: 50, bottom: 30, left: 50 })","        .dimension(region_dim)","        .group(total_emissions)","        .transitionDuration(500)","        .x(d3.scale.ordinal())","        .xUnits(dc.units.ordinal)","        .xAxisLabel(\"Countries\")","        .yAxisLabel(\"Co2 Emission Level (billion tonnes)\")","        .yAxis().ticks(8);","","}","","","","function show_region_emission_pie(ndx) {","    var area_dim = ndx.dimension(dc.pluck('Region'));","    var total_emissions_pie = area_dim.group().reduceSum(dc.pluck('EmissionsR'));","","    dc.pieChart(\"#region-pie-chart\")","        .height(500)","        .radius(150)","        .transitionDuration(1500)","        .dimension(area_dim)","        .group(total_emissions_pie);","}","","function show_eu_barchart(ndx) {","    var region_dim = ndx.dimension(dc.pluck(\"Country\"));","    var total_emissions = region_dim.group().reduceSum(dc.pluck('EmissionsC'));","","","    dc.barChart(\"#eu-pollution-chart\")","        .width(900)","        .height(850)","        .margins({ top: 10, right: 50, bottom: 30, left: 50 })","        .dimension(region_dim)","        .group(total_emissions)","        .transitionDuration(500)","        .x(d3.scale.ordinal())","        .xUnits(dc.units.ordinal)","        /*.xAxisLabel(\"Countries\")*/","        .yAxisLabel(\"Co2 Emission Level (million tonnes)\")","        .yAxis().ticks(7);","","}","","","function show_average_death_rate(ndx) {","    var dim = ndx.dimension(dc.pluck(\"Country\"));","","    function add_item(p, v) {","        p.count++;","        p.total += v.deaths","        p.average = p.total / p.count;","        return p;","    }","","    function remove_item(p, v) {","        p.count--;","        if (p.count == 0) {","            p.total = 0;","            p.average = 0;","        }","        else {","            p.total -= v.deaths;","            p.average = p.total / p.count;","        }","        return p;","    }","","    function intialise() {","        return { count: 0, total: 0, average: 0 };","    }","","","    var averageDeathRate = dim.group().reduce(add_item, remove_item, intialise);","","    dc.barChart(\"#average_death_rate\")","        .width(600)","        .height(400)","        .margins({ top: 10, right: 50, bottom: 30, left: 50 })","        .dimension(dim)","        .group(averageDeathRate)","        .valueAccessor(function(d){","            return d.value.average;","        })","        .transitionDuration(500)","        .x(d3.scale.ordinal())","        .xUnits(dc.units.ordinal)","        .xAxisLabel(\"Countries\")","        .yAxisLabel(\"Death\")","        .yAxis().ticks(8);","}","","/* scatter plot ideal for correlation between 2 different data items","e.g. death v gdp */","","","","function show_death_v_gdp_correlation(ndx) {","    ","    var nationColors = d3.scale.ordinal()","        .domain([\"Austria\", \"Belgium\", \"Bulgaria\" ,\"Croatia\", \"Cyprus\", \"Czech Republic\", \"Denmark\", \"Estonia\", \"Finland\", \"France\", \"Germany\", \"Greece\", \"Hungary\", \"Ireland\", \"Italy\", \"Latvia\" , \"Lithuania\",\"Luxembourg\",\"Malta\", \"Netherlands\",\"Poland\",\"Portugal\", \"Romania\",\"Slovakia\", \"Slovenia\",  \"Spain\", \"Sweden\", \"United Kingdom\"])","        .range([\"Red\", \"Yellow\", \"Pink\" ,\"Grey\", \"Brown\", \"Purple\", \"Orange\", \"Coffee\", \"Coral\", \"Emerald\", \"Gold\", \"Black\", \"Lemon\", \"Green\", \"Blue\", \"Violet\" , \"Cyan\", \"Crimson\",\"Jade\", \"Indigo\",\"Lime\", \"Magenta\", \"Olive\",\"Pear\", \"Peach\",  \"Plum\", \"Ruby\", \"Salmon\"]);","    ","    var gdpDim = ndx.dimension(dc.pluck(\"GDP\")) /* on x axis*/","    var deathCoDim = ndx.dimension(function (d) {","        return [d.GDP, d.Deaths, d.Country] /*first part on x axis*/","    });","    var gdpAndDeathGroup = deathCoDim.group();","    ","    var minGdpDeathRate = gdpDim.bottom(1)[0].GDP;","    var maxGdpDeathRate = gdpDim.top(1)[0].GDP;","    ","    ","    dc.scatterPlot(\"#death-v-gdp-plot\")","        .width(600)","        .height(400)","        .x(d3.scale.linear().domain([minGdpDeathRate, maxGdpDeathRate])) /* as gdp is numerical i.e. 10 is more than 9 */","        .brushOn(false)","        .symbolSize(6)","        .clipPadding(10)","        .xAxisLabel(\"GDP\")","        .yAxisLabel(\"Deaths\")","        .title(function(d) {","            return \"The death rate is \" + d.key[1] + \" for the country \" + d.key[2];","        })","        .colorAccessor(function(d) {","            return d.key[2];","        })","        .colors(nationColors)","        .dimension(deathCoDim)","        .group(gdpAndDeathGroup)","        .margins({ top: 10, right: 50, bottom: 75, left: 75 })","        .xAxis().ticks(5);","    ","    ","}","","/*","","function show_country_death_toll(ndx) {","    var timeDim = ndx.dimension(dc.pluck(\"Deaths\"));","    var countryDim = ndx.dimension(function(d) {","        return [d.Country, d.Deaths, d.Year];","    });","    var deathGroup = countryDim.group();","","    var minTime = timeDim.bottom(1)[0].Deaths;","    var maxTime = timeDim.top(1)[0].Deaths;","","    dc.scatterPlot(\"#death-plot\")","        .width(550)","        .height(400)","        .x(d3.scale.linear().domain([minTime, maxTime]))","        .brushOn(false)","        .symbolSize(6)","        .clipPadding(10)","        .xAxisLabel(\"Deaths (rounded off to highest decimal point)\")","        .title(function(d) {","            return \"this is\" + d.key[0];","        })","        .dimension(countryDim)","        .group(deathGroup)","        .margins({ top: 10, right: 50, bottom: 75, left: 75 })","        .xAxis().ticks(3);","","}","","*/","","","","","","/*","    ","function makeGraphs(error, euData) { ","    var ndx = crossfilter(euData);","    ","    pollutionData.forEach(function(d) {","        d.Emissions = parseInt(d.Emissions);","        d.Year = parseInt(d.Year);","    })","    ","    //show_country_pollution(ndx);","    ","    show_region_co2_emissions(ndx);","    ","    dc.renderAll();","    ","}*/","","","","/*function show_country_pollution(ndx) {","    var dim = ndx.dimension(dc.pluck(\"Entity\"));","    var group = dim.group();","    ","    dc.barChart(\"pollution-graph\")","        .width(400)","        .height(300)","        .margins({top: 10, right: 50, bottom: 30, left: 50})","        .dimension(dim)","        .group(group)","        .transitionDuration(500)","        .x(d3.scale.ordinal())","        .xUnits(dc.units.ordinal)","        .xAxisLabel(\"Countries\")","        .yAxis().ticks(20); ","}*/","","","/*function show_correlation_between_rating_and_viewership(ndx) {","","    var IMDBViewDim = ndx.dimension(function (d) {","        return [d.viewers, d.rating, d.episode, d.season];","    });","","","    var IMDBViewGroup = IMDBViewDim.group();","","    var seasonColors = d3.scale.ordinal()","        .domain([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"])","        .range(['#6E403A ', '#175ac6', '#E57687', '#DACC3E', '#7FB7BE', '#545a2c', '#020202', '#705D56']);","","    dc.scatterPlot(\"#corrIMDBandViews\")","        .dimension(IMDBViewDim)","        .group(IMDBViewGroup)","        .width(700)","        .height(400)","        .colorAccessor(function (d) {","            return d.key[3];","        })","","        .colors(seasonColors)","        .y(d3.scale.linear()","            .domain([0, 10]))","","        .x(d3.scale.linear()","            .domain([1, 14]))","        .brushOn(false)","        .symbolSize(8)","        .xAxisLabel(\"Viewers (in million)\")","        .yAxisLabel(\"IMDB Rating\")","        .title(function (d) {","            return d.key[2] + \" was rated a \" + d.key[1] + \" and had a viewership of \" + d.key[0] + \" million.\";","        })","        .clipPadding(5);","","} */"],"id":1}],[{"start":{"row":168,"column":24},"end":{"row":168,"column":25},"action":"insert","lines":["a"],"id":2},{"start":{"row":168,"column":25},"end":{"row":168,"column":26},"action":"insert","lines":["v"]},{"start":{"row":168,"column":26},"end":{"row":168,"column":27},"action":"insert","lines":["e"]},{"start":{"row":168,"column":27},"end":{"row":168,"column":28},"action":"insert","lines":["r"]},{"start":{"row":168,"column":28},"end":{"row":168,"column":29},"action":"insert","lines":["a"]},{"start":{"row":168,"column":29},"end":{"row":168,"column":30},"action":"insert","lines":["g"]},{"start":{"row":168,"column":30},"end":{"row":168,"column":31},"action":"insert","lines":["e"]}],[{"start":{"row":168,"column":31},"end":{"row":168,"column":32},"action":"insert","lines":[" "],"id":3}],[{"start":{"row":168,"column":43},"end":{"row":168,"column":44},"action":"insert","lines":["d"],"id":4},{"start":{"row":168,"column":44},"end":{"row":168,"column":45},"action":"insert","lines":["u"]},{"start":{"row":168,"column":45},"end":{"row":168,"column":46},"action":"insert","lines":["e"]}],[{"start":{"row":168,"column":46},"end":{"row":168,"column":47},"action":"insert","lines":[" "],"id":5},{"start":{"row":168,"column":47},"end":{"row":168,"column":48},"action":"insert","lines":["t"]},{"start":{"row":168,"column":48},"end":{"row":168,"column":49},"action":"insert","lines":["o"]}],[{"start":{"row":168,"column":49},"end":{"row":168,"column":50},"action":"insert","lines":[" "],"id":6},{"start":{"row":168,"column":50},"end":{"row":168,"column":51},"action":"insert","lines":["p"]},{"start":{"row":168,"column":51},"end":{"row":168,"column":52},"action":"insert","lines":["o"]},{"start":{"row":168,"column":52},"end":{"row":168,"column":53},"action":"insert","lines":["l"]},{"start":{"row":168,"column":53},"end":{"row":168,"column":54},"action":"insert","lines":["l"]},{"start":{"row":168,"column":54},"end":{"row":168,"column":55},"action":"insert","lines":["u"]},{"start":{"row":168,"column":55},"end":{"row":168,"column":56},"action":"insert","lines":["t"]},{"start":{"row":168,"column":56},"end":{"row":168,"column":57},"action":"insert","lines":["i"]},{"start":{"row":168,"column":57},"end":{"row":168,"column":58},"action":"insert","lines":["o"]},{"start":{"row":168,"column":58},"end":{"row":168,"column":59},"action":"insert","lines":["n"]}],[{"start":{"row":168,"column":59},"end":{"row":168,"column":60},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":168,"column":80},"end":{"row":168,"column":95},"action":"remove","lines":["for the country"],"id":8},{"start":{"row":168,"column":80},"end":{"row":168,"column":81},"action":"insert","lines":["i"]},{"start":{"row":168,"column":81},"end":{"row":168,"column":82},"action":"insert","lines":["n"]}],[{"start":{"row":168,"column":50},"end":{"row":168,"column":51},"action":"insert","lines":["a"],"id":9},{"start":{"row":168,"column":51},"end":{"row":168,"column":52},"action":"insert","lines":["i"]},{"start":{"row":168,"column":52},"end":{"row":168,"column":53},"action":"insert","lines":["r"]}],[{"start":{"row":168,"column":53},"end":{"row":168,"column":54},"action":"insert","lines":[" "],"id":10}]]},"ace":{"folds":[],"scrolltop":270,"scrollleft":0,"selection":{"start":{"row":69,"column":32},"end":{"row":69,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":15,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1565630389743,"hash":"fb5e5d0d1195f1e2f1e19b3e3bd3fd6905ce5ccb"}